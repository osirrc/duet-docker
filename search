#!/usr/bin/env python3
import os
import argparse
import json
import subprocess

print("Searching...")

parser = argparse.ArgumentParser()
parser.add_argument("--json", type=json.loads, required=True, help="the json input")
args, unknown = parser.parse_known_args()

topic_path = args.json["topic"]["path"]
out_file_name = args.json["opts"]["out_file_name"]
search_args = args.json["opts"]["search_args"]

#mode = ''
#try:
#    if args.json['opts']['mode'] == 'disjunctive' :
#        mode = '--disjunctive'
#except:
#    pass


# Recreate socketfiles by creating new farm
#subprocess.run('monetdbd start /work/mydbfarm'.split())
#python -m nordlys.elr.retrieval_elr <model_name>
#    subprocess.run("/searchRobust04.sh {} {} {} {} {} {} {}".format(collection_name, topic_path, top_k, out_file_name, search_rule, topic_type, use_prf), shell=True)

subprocess.run("python /elr_files/EntityLinkingRetrieval_master/nordlys/elr/retrieval_elr.py {}".format(search_args))
