#!/usr/bin/env python3
import os
import argparse
import json
import subprocess

print("Searching...")

parser = argparse.ArgumentParser()
parser.add_argument("--json", type=json.loads, required=True, help="the json input")
args, unknown = parser.parse_known_args()

topic_path = args.json["topic"]["path"]
mod = args.json["opts"]["model"]
if args.json["opts"]["threshold"]:
    threshold="-t "+(args.json["opts"]["threshold"])
else:
    threshold=''


os.chdir("//elr_files//EntityLinkingRetrieval-ELR-master")
subprocess.run("python -m nordlys.elr.retrieval_elr {} -q {} {} ".format(mod,topic_path,threshold),shell=True)






